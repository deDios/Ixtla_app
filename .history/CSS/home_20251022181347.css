/* ---------- Variables base ---------- */
:root{
  --hs-brand:#6aa995;
  --hs-accent:#4f6b95;
  --hs-text:#111827;
  --hs-text-muted:#6b7280;
  --hs-border:#e5e7eb;

  --page-max: 1800px;
  --page-pad-left: clamp(12px, 1.5vw, 20px);
  --page-pad-right: clamp(28px, 4vw, 48px);

  --sidebar-w: 280px;
  --sidebar-pad-x: 12px;
  --radius: 14px;

  /* Cards / charts */
  --hs-card-bg: #fff;
  --hs-card-radius: 10px;
  --hs-card-pad: 16px;
  --hs-chart-height: 240px;
  --hs-gap: 16px;

  /* Alturas de referencia (ajusta --header-h a tu header real) */
  --header-h: 12px;
  --subnav-h: 48px;
  --sticky-top: calc(var(--header-h) + var(--subnav-h));
  --footer-pad: 32px;

  /* Gráficas */
  --line-height-responsive: clamp(220px, 28vw, 320px);

  /* Donut + leyenda */
  --legend-w: clamp(240px, 28vw, 360px);
  --donut-max: 420px;
}

@media (prefers-color-scheme: dark){
  :root{
    --hs-card-bg:#111827;
    --hs-text:#e5e7eb;
    --hs-text-muted:#9ca3af;
    --hs-border:#374151;
  }
}

/* ---------- Base ---------- */
html,body{height:100%;}
body{
  overflow-y:auto;
  overflow-x:hidden;
  scroll-behavior:smooth;
  background:#fff;
}
main.home-samapa{
  color:var(--hs-text);
  padding:16px 0 24px;
  padding-top:5rem;                 /* debajo del header/subnav de la plantilla */
  color-scheme:light;               /* fuerza tema claro aquí */
  --hs-card-bg:#fff !important;
  --hs-text:#111827 !important;
  --hs-text-muted:#6b7280 !important;
  --hs-border:#e5e7eb !important;
}

/* ==============================
   Contenedor principal
   ============================== */
.home-samapa .hs-wrap{
  display:grid;
  grid-template-columns: var(--sidebar-w) 1fr;
  gap: clamp(18px, 2.2vw, 26px);
  align-items:stretch;

  max-width: var(--page-max);
  margin-inline:auto;
  padding-left: var(--page-pad-left);
  padding-right: var(--page-pad-right);
  padding-bottom: var(--footer-pad); /* aire para que el sticky no toque el footer */

  /* divisor vertical */
  background-image: linear-gradient(var(--hs-border), var(--hs-border));
  background-repeat:no-repeat;
  background-size:1px 100%;
  background-position: calc(var(--page-pad-left) + var(--sidebar-w)) 0;
}
@media (max-width:992px){
  .home-samapa .hs-wrap{
    grid-template-columns:1fr;
    background-image:none;
    padding-inline: clamp(14px, 4vw, 24px);
  }
}

/* ==============================
   Sidebar
   ============================== */
.hs-sidebar{
  display:flex;
  flex-direction:column;
  gap:14px;
  padding-inline: var(--sidebar-pad-x);
  padding-top:1rem;

  position:sticky;
  top:var(--sticky-top);
  align-self:start;                  /* importante dentro del grid */
  z-index:1;
  margin-bottom: var(--footer-pad);  /* evita encimarse al footer */
}
.hs-profile{
  display:grid;
  gap:8px;
  justify-items:center;
  text-align:center;
}
.hs-profile .avatar{
  width:88px; height:88px; border-radius:50%;
  background:#e9edf1; object-fit:cover; display:block;
  box-shadow: inset 0 1px 0 rgba(0,0,0,.06);
}
.hs-profile .name{ font-weight:700; margin:4px 0 2px; }
.hs-profile .badge{
  display:inline-flex; align-items:center; justify-content:center;
  padding:8px 12px; border-radius:999px; font-weight:700; color:#fff; background:var(--hs-brand);
}

/* Botón “Administrar perfil” */
.hs-profile .edit-profile{
  appearance:none;
  display:inline-flex; align-items:center; gap:.35rem;
  padding:.42rem .75rem;
  border-radius:10px; border:1px solid var(--hs-border);
  background:#fff; color:#374151;
  font-size:.92rem; font-weight:600; line-height:1;
  box-shadow:0 1px 0 rgba(0,0,0,.04);
  transition:background .15s, border-color .15s, box-shadow .15s, transform .05s;
}
.hs-profile .edit-profile:hover{ background:#f9fafb; border-color:#cbd5e1; }
.hs-profile .edit-profile:active{ transform:translateY(1px); }
.hs-profile .edit-profile:focus-visible{
  outline:2px solid #93c5fd; outline-offset:2px;
  box-shadow:0 0 0 2px rgba(59,130,246,.2);
}

/* Estados (sidebar) */
.hs-states{ display:flex; flex-direction:column; gap:2px; }
.hs-states .item{
  all:unset;
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 14px; border-radius:10px; cursor:pointer; color:#334155;
}
.hs-states .item:hover{ background:#f3f4f6; }
.hs-states .item .label{ font-weight:600; }
.hs-states .item .count{ color:#2e7d32; }
.hs-states .item.is-active,
.hs-states .item[aria-checked="true"]{ color:var(--hs-brand); background:#eef7f3; }
.hs-states .item[aria-disabled="true"]{ color:#9ca3af; cursor:default; }

/* ==============================
   Main
   ============================== */
.hs-main{
  display:grid; gap: clamp(18px, 2vw, 28px);
  min-height: calc(100vh - var(--sticky-top) - var(--footer-pad));
  padding-bottom: var(--footer-pad);
  overflow:visible;
}

/* ==============================
   Fila de charts 60/40
   ============================== */
.hs-charts{
  display:grid;
  grid-template-columns: minmax(520px, 3fr) minmax(460px, 2fr);
  gap: var(--hs-gap);
  align-items:stretch;
  max-height:330px;
}
@media (max-width:1200px){
  .hs-charts{ grid-template-columns:1fr; }
}

/* Tarjeta de chart */
.hs-card{
  border:1px solid var(--hs-border);
  border-radius: var(--hs-card-radius);
  padding: var(--hs-card-pad);
  position:relative;
  overflow:visible; /* tooltips sin recortes */
}

/* Contenedor de gráfico */
.hs-chart-wrap{
  position:relative;
  height:var(--hs-chart-height);
  max-height:250px;
  background:#fff !important;
  overflow:visible;
}
.hs-card:first-child .hs-chart-wrap{ height: var(--line-height-responsive); }

/* Canvas */
.hs-chart-wrap > canvas{
  display:block;
  width:100% !important;
  height:100% !important;
}

/* Tooltip de librería */
.chart-tip{
  z-index:10;
  white-space:nowrap;
  max-width:none;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.25));
}

/* ==============================
   Donut: gráfico + leyenda a la derecha
   ============================== */
.hs-donut{
  display:grid;
  grid-template-columns: minmax(220px, max-content) var(--legend-w);
  align-items:center;
  column-gap:1rem;
}
/* tamaño del donut = min(tope, 32vw, disponible) */
.hs-donut .hs-chart-wrap{
  --available: max(220px, calc(100% - var(--legend-w) - 1rem));
  inline-size: min(var(--donut-max), clamp(220px, 32vw, 420px), var(--available));
  min-inline-size:220px;
  block-size:auto;
}
.hs-donut .hs-chart-wrap > canvas{
  width:100% !important;
  height:auto !important;
  aspect-ratio:1 / 1;
  display:block;
}

/* Leyenda: 1 columna, scroll vertical y gutter estable */
.hs-donut-legend{
  width:var(--legend-w);
  max-height:100%;
  overflow-y:auto;
  overflow-x:hidden;
  padding-right:12px;
  scrollbar-gutter:stable both-edges;
  font-size:13px;
}
#donut-legend{
  display:grid !important;
  grid-template-columns:1fr;     /* una sola columna */
  gap:.6rem .75rem;
  align-content:start;
  padding:0; margin:0; list-style:none;
  max-width:190px;
}
/* item: • | texto | %  */
#donut-legend > li,
#donut-legend > div{
  display:grid !important;
  grid-template-columns: .9rem 1fr minmax(3.5ch, max-content);
  align-items:start;
  column-gap:.6rem;
  width:100%;
  box-sizing:border-box;
  padding-right:8px;             /* que el % no choque el borde */
  background-clip:padding-box;   /* si das fondo, evita overflow */
}
#donut-legend .bullet{
  width:.75rem; height:.75rem; border-radius:999px; margin-top:.25rem;
}
#donut-legend .t{
  min-width:0;
  white-space:normal;
  overflow-wrap:anywhere;
  line-height:1.25;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
}
#donut-legend .pct{
  justify-self:end;              /* SIEMPRE pegado a la derecha */
  text-align:right;
  white-space:nowrap;
  min-width:3.5ch;
  font-variant-numeric:tabular-nums;
}

/* Móvil: donut arriba y leyenda debajo */
@media (max-width:768px){
  .hs-donut{
    grid-template-columns:1fr;
    row-gap:1rem;
  }
  .hs-donut .hs-chart-wrap{
    inline-size:min(360px, 80vw);
    margin-inline:auto;
  }
  .hs-donut-legend{
    width:100%;
    max-height:220px;
    padding-right:10px;
  }
}

/* ==============================
   Tabla + buscador
   ============================== */
.hs-table .hs-head{
  display:flex; align-items:center; gap:10px; margin:18px 0 12px;
}
.hs-table .hs-head h3{ margin:0 6px 0 0; font-weight:700; }
.hs-table .hs-head .hs-tools{
  flex:1; display:flex; align-items:center; gap:14px; flex-wrap:wrap; justify-content:space-between;
}
.hs-table .search{
  display:flex; align-items:center; gap:8px;
  background:#f6f7f9; border:1px solid #e7e9ee; border-radius:999px; padding:8px 12px;
}
.hs-table .search input{
  border:0; background:transparent; outline:none; min-width:260px; color:var(--hs-text);
}
.hs-table .hs-tools .legend{
  padding-left:22px; border-left:1px solid var(--hs-border);
  color:#566171; white-space:nowrap;
}
@media (max-width:1200px){
  .hs-table .hs-tools{ justify-content:flex-start; }
  .hs-table .hs-tools .legend{ border-left:0; padding-left:0; margin-top:6px; }
}

/* Wrapper tabla */
.table-wrap{
  position:relative; overflow:auto; max-height:60vh;
  background:#fff; border:1px solid #e9edf2; border-radius: var(--radius);
  box-shadow:0 1px 0 rgba(0,0,0,.02);
  clip-path: inset(0 round var(--radius));
}

/* Tabla */
table.gc{ width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; }
table.gc thead th{
  position:sticky; top:0; z-index:2;
  background:#f3f4f6; border-bottom:1px solid var(--hs-border);
  padding:14px 20px; font-weight:700; color:#334155; white-space:nowrap; text-align:left;
}
table.gc tbody td{
  padding:14px 20px; border-bottom:1px solid #f0f3f6; color:#131a22; vertical-align:middle; background:#fff;
}
table.gc tbody tr:nth-child(even){ background:#fafafa; }
table.gc tbody tr:hover{ background:#f3f4f6; }

table.gc th:nth-child(1), table.gc td:nth-child(1){ min-width:220px; text-align:left; }
table.gc th:nth-child(2), table.gc td:nth-child(2){ min-width:200px; text-align:center; }
table.gc th:nth-child(3), table.gc td:nth-child(3){ min-width:150px; text-align:center; }
table.gc th:nth-child(4), table.gc td:nth-child(4){ min-width:140px; text-align:center; padding-right:28px; }

.gc td:nth-child(2), .gc td:nth-child(3){
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.gc td:nth-child(1){ font-variant-numeric:tabular-nums; color:#111827; }
.gc td:nth-child(4){ white-space:nowrap; }

.gc tbody tr.is-clickable{ cursor:pointer; }
.gc tbody tr.is-clickable:hover td{ background:#f9fafb; }

.gc tbody tr.hs-gap td{
  background:#fff !important; height:42px; border-bottom:1px solid #f3f4f6;
}
.gc tbody tr.hs-gap{ pointer-events:none; }

/* Columna "Estatus" centrada */
.hs-table table.gc thead th:nth-child(6),
.hs-table table.gc tbody td:nth-child(6){
  text-align:center; padding-left:0; padding-right:0; width:160px;
}
@media (max-width:920px){
  .hs-table table.gc thead th:nth-child(6),
  .hs-table table.gc tbody td:nth-child(6){ width:140px; }
}

/* Badge de estatus */
.badge-status{
  display:inline-flex; align-items:center; justify-content:center;
  min-height:24px; min-width:70px; padding:4px 10px;
  border-radius:10px; line-height:1; font-size:12px; font-weight:600; color:#111827;
}
.badge-status[data-k="solicitud"]  { background:#e9eafe; }
.badge-status[data-k="revision"]   { background:#e6f0ff; }
.badge-status[data-k="asignacion"] { background:#e6fff4; }
.badge-status[data-k="enProceso"]  { background:#e8f1ff; }
.badge-status[data-k="pausado"]    { background:#fff4da; }
.badge-status[data-k="cancelado"]  { background:#ffe4e6; }
.badge-status[data-k="finalizado"] { background:#e7fff4; }

/* ==============================
   Paginación
   ============================== */
.hs-pager{
  display:flex; align-items:center; flex-wrap:wrap; gap:.4rem; margin-top:.75rem;
}
.hs-pager .btn{
  border:1px solid var(--hs-border); background:#fff; color:var(--hs-text);
  padding:8px 12px; border-radius:10px; font-weight:700; cursor:pointer;
}
.hs-pager .btn.primary{ background:var(--hs-accent); border-color:var(--hs-accent); color:#fff; }
.hs-pager input[type="number"]{
  width:4rem; padding:.35rem .4rem; border:1px solid #e5e7eb; border-radius:.375rem;
}
@media (max-width:1100px){
  .hs-pager{ justify-content:center; row-gap:10px; }
}
@media (max-width:640px){
  .hs-pager .btn{ padding:6px 10px; border-radius:10px; }
  .hs-pager input[type="number"]{ width:64px; }
}

/* ==============================
   Utilidades
   ============================== */
.muted{ color:var(--hs-text-muted); }
.sr-only{
  position:absolute !important;
  width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
  clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* ==============================
   Modal (perfil)
   ============================== */
.modal-overlay{
  position: fixed; inset: 0; display: none;
  align-items: center; justify-content: center;
  padding: 1.25rem;
  background: rgba(17,24,39,.6);
  z-index: 9999;
}
.modal-overlay.active{ display: flex; }
body.modal-open{ overflow: hidden; }

.modal-content{
  width: min(760px, 92vw);
  max-width: 92vw;                 /* evita crecer más que el viewport */
  max-height: min(88vh, 1000px);
  overflow-y: auto;
  overflow-x: hidden;              /* <- NO scroll horizontal */
  background: #fff; color: #111827;
  border-radius: 12px;
  box-shadow: 0 15px 45px rgba(0,0,0,.25);
  padding: 20px 24px 16px;         /* respirito uniforme */
  transform: translateY(8px) scale(.985);
  opacity: 0;
  transition: transform .18s ease, opacity .18s ease;
  scrollbar-gutter: stable both-edges;
}
.modal-content *{ box-sizing: border-box; }  /* <- sin 100% + padding overflow */
.modal-overlay.active .modal-content{
  transform: translateY(0) scale(1);
  opacity: 1;
}
.modal-content h2{
  margin: 4px 0 16px;
  font-size: clamp(1.6rem, 1.2rem + 1.2vw, 2rem);
  font-weight: 800; text-align: center;
  color: #111827;
}
.modal-close{
  position: absolute; top: .5rem; right: .75rem;
  background: transparent; border: 0;
  font-size: 1.25rem; cursor: pointer; color: #111827; opacity: .6;
}
.modal-close:hover{ opacity: 1; }

/* ===== Form layout ===== */
.form-section-title{
  margin: 14px 0 6px;
  font-size: .9rem; font-weight: 800; letter-spacing: .02em;
  color: #6b7280; text-transform: uppercase;
  border-top: 1px solid #e5e7eb;
  padding-top: 10px;
}

.form-row{ margin: 8px 0 14px; }

.form-row.split{
  display: grid;
  grid-template-columns: minmax(0,1fr) minmax(0,1fr); /* <- evita overflow */
  column-gap: 16px; row-gap: 0;
}
.form-row.split > div{ min-width: 0; }             /* <- inputs pueden encoger */

.form-row label{
  display: block; font-size: .9rem; color: #6b7280; margin-bottom: .35rem;
}

.form-row input[type="text"],
.form-row input[type="email"],
.form-row input[type="password"],
.form-row input[type="tel"]{
  width: 100%; height: 38px; padding: 0 .65rem;
  border: 1px solid #e5e7eb; border-radius: 8px;
  background: #f9fafb; color: #111827; outline: none;
  transition: border-color .15s, background .15s, box-shadow .15s;
}
.form-row input:focus{
  border-color: #3b82f6; background: #fff;
  box-shadow: 0 0 0 3px rgba(59,130,246,.15);
}

/* Solo lectura */
.is-readonly{
  background:#f3f4f6; color:#6b7280; border-color:#e5e7eb; cursor:not-allowed;
}

/* Tooltip mini */
.tooltip{ position: relative; cursor: help; display: inline-block; }
.tooltip .tooltiptext{
  visibility: hidden; position: absolute; left: 50%; bottom: 115%;
  transform: translateX(-50%); background: #111827; color: #fff;
  padding: .35rem .5rem; border-radius: .5rem; white-space: nowrap;
  font-size: .75rem; opacity: 0; transition: opacity .12s;
}
.tooltip:hover .tooltiptext{ visibility: visible; opacity: 1; }

/* Submit */
.btn-submit{
  width: 100%; height: 42px; border: 0; border-radius: 8px;
  background: #3b82f6; color: #fff; font-weight: 600; cursor: pointer;
  margin-top: 8px; transition: filter .15s;
}
.btn-submit:hover{ filter: brightness(1.05); }

/* Responsivo */
@media (max-width: 520px){
  .form-row.split{ grid-template-columns: 1fr; }
  .modal-content{ width: min(96vw, 760px); }
}










/* Avatar con botón de edición */
.hs-profile .avatar-wrap{
  position: relative;
  display: inline-block;
}
.hs-profile .avatar{
  width: 104px;
  height: 104px;
  border-radius: 9999px;
  display: block;
  object-fit: cover;
}
.hs-profile .avatar-edit{
  position: absolute;
  right: 4px;
  bottom: 4px;
  width: 34px;
  height: 34px;
  border-radius: 9999px;
  border: 1px solid #d1d5db;
  background: #fff;
  display: grid;
  place-items: center;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,.12);
  transition: transform .12s ease, background .12s ease;
}
.hs-profile .avatar-edit:hover{ background: #f3f4f6; transform: translateY(-1px); }
.hs-profile .avatar-edit:active{ transform: translateY(0); }
.hs-profile .avatar-edit svg{
  width: 18px; height: 18px; color: #374151;
}










/* Avatar shell como en GodCode */
.hs-profile .avatar-shell{
  position: relative;
  display: inline-block;
  margin: 0 auto .5rem;
}
.hs-profile .avatar-circle{
  width: 112px;
  height: 112px;
  border-radius: 999px;
  overflow: hidden;
  background: #eef2f7;
  border: 3px solid #d7dbe0;
  display: grid;
  place-items: center;
}
.hs-profile .avatar{
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Botón lápiz sobre la foto */
.hs-profile .avatar-edit{
  position: absolute;
  right: 6px;
  bottom: 6px;
  width: 34px;
  height: 34px;
  border-radius: 999px;
  background: #fff;
  border: 1px solid #d1d5db;
  display: grid;
  place-items: center;
  box-shadow: 0 2px 8px rgba(0,0,0,.12);
  cursor: pointer;
  transition: transform .12s ease, box-shadow .12s ease;
  z-index: 2;
}
.hs-profile .avatar-edit:hover{
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,.16);
}
.hs-profile .avatar-edit[disabled]{
  opacity: .55;
  cursor: not-allowed;
  pointer-events: none;
}

/* Botón “Administrar perfil” sin pegarse a la foto */
.hs-profile .edit-profile{
  margin-top: .25rem;
}
